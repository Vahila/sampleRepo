name: Read logs
on: push

jobs:
  read-logs:
    name: Reading logs
    runs-on: ubuntu-latest
    steps:
#       - name: Test files running
#         run: curl --request POST --header "Authorization:Bearer ${{ secrets.GITHUB_TOKEN }}" --url "https://api.github.com/repos/Vahila/sampleRepo/actions/workflows/${{matrix.test-files}}/dispatches"       

      - name: API to get logs
        run: |
          curl --request GET --header "Authorization:Bearer ${{ secrets.GITHUB_TOKEN }}" --url "https://api.github.com/repos/Vahila/sampleRepo/actions/workflows/bashTest.yml/runs" -o runs.json
          ls
          echo "runid=$(cat runs.json | jq '.workflow_runs[0].id')" >> $GITHUB_ENV
          echo `cat runs.json | jq '.workflow_runs[0].id'`
        
      - name: print env
        run: echo ${{env.runid}}
           
