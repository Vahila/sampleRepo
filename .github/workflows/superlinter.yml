# name: Super-Linter

# Run this workflow every time a new commit pushed to your repository
# on: push

# jobs:
#   # Set the job key. The key is displayed as the job name
#   # when a job name is not provided
#   super-lint:
#     # Name the Job
#     name: Lint code base
#     # Set the type of machine to run on
#     runs-on: ubuntu-latest

#     steps:
      # Checks out a copy of your repository on the ubuntu-latest machine
#       - name: Checkout code
#         uses: actions/checkout@v2

#       # Runs the Super-Linter action
#       - name: Run Super-Linter
#         uses: github/super-linter@v3
#         env:
#           DEFAULT_BRANCH: master
#           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
name: Run MATLAB Script on GitHub-Hosted Runner
on: [push]
jobs:
  my-job:
    name: Run MATLAB Script
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v2
      - name: Install MATLAB
        uses: matlab-actions/setup-matlab@v0
        with:
            release: R2020b
      - name: Run script
        uses: matlab-actions/run-command@v0
        with:
          command: version
          
      - name: Run Tests
        uses: matlab-actions/run-tests@v0.1.0
        with:
          source-folder: src
          test-results-junit: test-results/results.xml
          code-coverage-cobertura: code-coverage/coverage.xml
          select-by-tag: TestModel
            
      - name: Upload artifacts
        uses: actions/upload-artifact@v2
        with:
          name: code-coverage-artifact
          path: code-coverage/coverage.xml
          
      - name: upload to codecov 
        uses: codecov/codecov-action@v1 
        with:
          file: code-coverage/coverage.xml



